<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · LMDiskANN.jl</title><meta name="title" content="Home · LMDiskANN.jl"/><meta property="og:title" content="Home · LMDiskANN.jl"/><meta property="twitter:title" content="Home · LMDiskANN.jl"/><meta name="description" content="Documentation for LMDiskANN.jl."/><meta property="og:description" content="Documentation for LMDiskANN.jl."/><meta property="twitter:description" content="Documentation for LMDiskANN.jl."/><meta property="og:url" content="https://mantzaris.github.io/LMDiskANN.jl/"/><meta property="twitter:url" content="https://mantzaris.github.io/LMDiskANN.jl/"/><link rel="canonical" href="https://mantzaris.github.io/LMDiskANN.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>LMDiskANN.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Contributing"><span>Contributing</span></a></li><li><a class="tocitem" href="#Reporting-Issues"><span>Reporting Issues</span></a></li><li class="toplevel"><a class="tocitem" href="#Functions"><span>Functions</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mantzaris/LMDiskANN.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mantzaris/LMDiskANN.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="LMDiskANN"><a class="docs-heading-anchor" href="#LMDiskANN">LMDiskANN</a><a id="LMDiskANN-1"></a><a class="docs-heading-anchor-permalink" href="#LMDiskANN" title="Permalink"></a></h1><p><strong>LM-DiskANN</strong> is an approximate nearest‐neighbor indexing library that builds and maintains a disk‐resident graph structure for high‐dimensional data. It aims to provide a balance between fast search times, memory efficiency, and support for incremental updates (insertion and deletion). Under the hood, LM-DiskANN stores vector embeddings in memory‐mapped files, limiting in‐memory usage while preserving quick random access. It also leverages a graph-based BFS expansion to find candidate neighbors, with user‐configurable parameters like search expansion factor (<code>EF_SEARCH</code>) and maximum neighborhood size (<code>maxdegree</code>).</p><p>&quot;LM-diskann: Low memory footprint in disk-native dynamic graph-based ann indexing.&quot; Pan, Yu, Jianxin Sun, and Hongfeng Yu, 2023 IEEE International Conference on Big Data (BigData). IEEE, 2023.</p><p>It offers the <em>optional user‐key mapping</em>, allowing users to associate string keys with each embedding. This means you can insert vectors with a custom ID (e.g., &quot;image001&quot;), search for nearest neighbors, then retrieve or delete by either the numeric internal ID or the user key. The library includes utility functions to open, close, and clear these user‐key databases, enabling a more flexible integration with real-world applications where data might be identified by strings or external IDs.</p><h3 id="Example-Usage-with-Synthetic-Data"><a class="docs-heading-anchor" href="#Example-Usage-with-Synthetic-Data">Example Usage with Synthetic Data</a><a id="Example-Usage-with-Synthetic-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Example-Usage-with-Synthetic-Data" title="Permalink"></a></h3><p>Below is a short script you can run to see LM-DiskANN in action. We’ll:</p><ol><li>Create an index for <code>dim=5</code> vectors.</li><li>Insert a few vectors—some with user keys, some without.</li><li>Search for a known vector.</li><li>Delete by either numeric ID or user key.</li></ol><pre><code class="language-julia hljs">using LMDiskANN  
using Random

# 1 make an index with dimension 5
dim = 5
index = create_index(&quot;example_index&quot;, dim)

# 2 insert a couple of random vectors
vec1 = rand(Float32, 5)
(key1, id1) = ann_insert!(index, vec1)
@show key1, id1   # e.g. might be (&quot;1&quot;, 1) if no user key was specified

# insert a vector with a user key
vec2 = rand(Float32, 5)
(user_key, id2) = ann_insert!(index, vec2; key=&quot;my_special_vector&quot;)
@show user_key, id2  # e.g. (&quot;my_special_vector&quot;, 2)

# 3 search for vec1
results = search(index, vec1, topk=3)  # returns an array of (maybeKey, ID)
println(&quot;Search results for vec1 = &quot;, results)

# 4 retrieve the actual embedding from the index by numeric ID
retrieved_vec1 = get_embedding_from_id(index, id1)
println(&quot;retrieved_vec1 == vec1 ? &quot;, all(retrieved_vec1 .== vec1))

# retrieve by user key
retrieved_vec2 = get_embedding_from_key(index, &quot;my_special_vector&quot;)
println(&quot;retrieved_vec2 == vec2 ? &quot;, all(retrieved_vec2 .== vec2))

# 5 delete an entry
ann_delete!(index, id1) # by numeric ID
ann_delete!(index, &quot;my_special_vector&quot;) # by user key

# 6 confirm they&#39;re gone (search or retrieval should fail)
println(&quot;After deletions, search(vec1) =&gt; &quot;, search(index, vec1, topk=3))
try
    get_embedding_from_id(index, id1)
catch e
    println(&quot;Caught an expected error when retrieving a deleted vector: &quot;, e)
end</code></pre><h3 id="Example-real-data-embeddings-from-GLoVe-and-usage"><a class="docs-heading-anchor" href="#Example-real-data-embeddings-from-GLoVe-and-usage">Example real data embeddings from GLoVe and usage</a><a id="Example-real-data-embeddings-from-GLoVe-and-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Example-real-data-embeddings-from-GLoVe-and-usage" title="Permalink"></a></h3><p>Build a 10 000-word cosine LM-DiskANN index and explore semantic neighbours using embedding vectors from GLoVe.</p><pre><code class="language-julia hljs">using Embeddings #downloads pre-trained vectors of word embeddings
using LMDiskANN #this package added via, add https://github.com/mantzaris/LMDiskANN.jl
using Distances, LinearAlgebra, Random, Printf

tab = load_embeddings(GloVe{:en}, 2; max_vocab_size = 10_000)
words = tab.vocab
vectors = tab.embeddings #100 × 10 000 Float32
(dim, N) = size(vectors)
@info &quot;Loaded $N by $dim GloVe vectors&quot;

word2id = Dict(w =&gt; i for (i, w) in enumerate(words)) #helper function
vectors ./= sqrt.(sum(abs2, vectors; dims = 1)) #normalisation

idx = create_index(&quot;glove_demo&quot;, dim; metric = CosineDist()) #&lt;- create the store

for (vec, w) in zip(eachcol(vectors), words)  #insert into the lmdiskann the (vector, word)
    ann_insert!(idx, vec; key = w) #&lt;- insert into the store
end
@info &quot;Index built with $(idx.num_points) points&quot;


nearest(w; k = 5) = let id = word2id[w]
    hits = search(idx, vectors[:, id], topk = k + 1) #&lt;- search the store, first high result would be the word itself
    [words[h[2]] for h in hits[2:end]]
end

for w in (&quot;king&quot;, &quot;queen&quot;, &quot;paris&quot;, &quot;cat&quot;, &quot;coffee&quot;)
           @printf(&quot;  %-6s -&gt; %s\n&quot;, w, join(nearest(w), &quot;, &quot;))
       end
# prints eg:
#  king   -&gt; prince, queen, son, brother, monarch
#  queen  -&gt; princess, king, elizabeth, royal, lady
#  paris  -&gt; france, london, brussels, french, rome
#  cat    -&gt; dog, cats, pet, dogs, mouse
#  coffee -&gt; tea, drinks, beer, wine, drink

#classic analogy for vectors

v = vectors[:, word2id[&quot;king&quot;]] .- vectors[:, word2id[&quot;man&quot;]] .+ vectors[:, word2id[&quot;woman&quot;]]
v ./= norm(v) 


ignore = Set([&quot;king&quot;, &quot;man&quot;, &quot;woman&quot;]) #skip seed words
for (_key, id) in search(idx, v, topk = 10)
    w = words[id]
    w ∉ ignore &amp;&amp; (println(&quot;king - man + woman -&gt; &quot;, w); break)
end

#prints:
# king - man + woman -&gt; queen</code></pre><h2 id="Contributing"><a class="docs-heading-anchor" href="#Contributing">Contributing</a><a id="Contributing-1"></a><a class="docs-heading-anchor-permalink" href="#Contributing" title="Permalink"></a></h2><p>We welcome contributions from the community! To contribute to this project:</p><ol><li><strong>Fork the repository</strong> and create your branch from <code>main</code>.</li><li><strong>Write clear, modular code</strong> and follow existing code conventions.</li><li><strong>Document your changes</strong> clearly in code and, if needed, in the <code>README.md</code>.</li><li><strong>Test your changes</strong> thoroughly.</li><li>Submit a <strong>Pull Request</strong> with a clear description of what you&#39;ve added or changed.</li></ol><p>Or for general ideas please feel free to share them.</p><hr/><h2 id="Reporting-Issues"><a class="docs-heading-anchor" href="#Reporting-Issues">Reporting Issues</a><a id="Reporting-Issues-1"></a><a class="docs-heading-anchor-permalink" href="#Reporting-Issues" title="Permalink"></a></h2><p>Found a bug or an issue? Help us improve by reporting it. Please:</p><ul><li>Open a new <a href="https://github.com/mantzaris/LMDiskANN.jl/issues">GitHub Issue</a>.</li><li>Include a <strong>clear and descriptive title</strong>.</li><li>Provide steps to <strong>reproduce the problem</strong>, expected vs. actual behavior, and your system/environment details.</li><li>Add relevant <strong>logs, screenshots, or error messages</strong> to help diagnose the issue.</li></ul><hr/><h1 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h1><ul><li><a href="#LMDiskANN.ann_delete!-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, Union{Int64, String}}} where T&lt;:AbstractFloat"><code>LMDiskANN.ann_delete!</code></a></li><li><a href="#LMDiskANN.ann_insert!-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, AbstractVector{&lt;:AbstractFloat}}} where T&lt;:AbstractFloat"><code>LMDiskANN.ann_insert!</code></a></li><li><a href="#LMDiskANN.clear_all_databases!-Tuple{Any, Any}"><code>LMDiskANN.clear_all_databases!</code></a></li><li><a href="#LMDiskANN.close_databases-Tuple{Any, Any}"><code>LMDiskANN.close_databases</code></a></li><li><a href="#LMDiskANN.close_id_mapping-Union{Tuple{LMDiskANN.LMDiskANNIndex{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>LMDiskANN.close_id_mapping</code></a></li><li><a href="#LMDiskANN.create_index-Tuple{String, Int64}"><code>LMDiskANN.create_index</code></a></li><li><a href="#LMDiskANN.delete_by_id!-Tuple{Any, Any, Int64}"><code>LMDiskANN.delete_by_id!</code></a></li><li><a href="#LMDiskANN.delete_by_key!-Tuple{Any, Any, String}"><code>LMDiskANN.delete_by_key!</code></a></li><li><a href="#LMDiskANN.get_embedding_from_id-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, Int64}} where T&lt;:AbstractFloat"><code>LMDiskANN.get_embedding_from_id</code></a></li><li><a href="#LMDiskANN.get_embedding_from_key-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, String}} where T&lt;:AbstractFloat"><code>LMDiskANN.get_embedding_from_key</code></a></li><li><a href="#LMDiskANN.get_id_from_key-Tuple{Any, String}"><code>LMDiskANN.get_id_from_key</code></a></li><li><a href="#LMDiskANN.get_key_from_id-Tuple{Any, Int64}"><code>LMDiskANN.get_key_from_id</code></a></li><li><a href="#LMDiskANN.insert_key!-Tuple{Any, Any, String, Int64}"><code>LMDiskANN.insert_key!</code></a></li><li><a href="#LMDiskANN.list_all_keys-Tuple{Any}"><code>LMDiskANN.list_all_keys</code></a></li><li><a href="#LMDiskANN.load_index-Tuple{String}"><code>LMDiskANN.load_index</code></a></li><li><a href="#LMDiskANN.open_databases-Tuple{String, String}"><code>LMDiskANN.open_databases</code></a></li><li><a href="#LMDiskANN.search-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, AbstractVector{&lt;:AbstractFloat}}} where T&lt;:AbstractFloat"><code>LMDiskANN.search</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.ann_delete!-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, Union{Int64, String}}} where T&lt;:AbstractFloat" href="#LMDiskANN.ann_delete!-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, Union{Int64, String}}} where T&lt;:AbstractFloat"><code>LMDiskANN.ann_delete!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ann_delete!(index::LMDiskANNIndex{T}, node_id::Union{Int,String}) where {T&lt;:AbstractFloat}</code></pre><p>Delete a vector (and adjacency) from the index. Implements Algorithm 3 from the LM-DiskANN paper.</p><p><strong>Arguments</strong></p><ul><li><code>index::LMDiskANNIndex</code>: The index to delete from</li><li><code>node_id::Int</code>: The ID of the vector to delete</li></ul><p><strong>Returns</strong></p><ul><li><code>LMDiskANNIndex</code>: The updated index instance</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">LMDiskANN.ann_delete!(index, id)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/LMDiskANN.jl#L587-L604">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.ann_insert!-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, AbstractVector{&lt;:AbstractFloat}}} where T&lt;:AbstractFloat" href="#LMDiskANN.ann_insert!-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, AbstractVector{&lt;:AbstractFloat}}} where T&lt;:AbstractFloat"><code>LMDiskANN.ann_insert!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ann_insert!(index::LMDiskANNIndex{T},
                 new_vec::AbstractVector{&lt;:AbstractFloat};
                 key::Union{Nothing,String}=nothing) where {T&lt;:AbstractFloat}</code></pre><p>Insert a new vector into the index. Updates the adjacency structure. Returns the assigned ID of the newly inserted vector. Implements Algorithm 2 from the LM-DiskANN paper.</p><p><strong>Arguments</strong></p><ul><li><code>index::LMDiskANNIndex{T}</code>: The index to insert into</li><li><code>new_vec::Vector{&lt;:AbstractFloat}</code>: The vector to insert</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>key</code>:: String: the key the user wants to associate with the new vector</li></ul><p><strong>Returns</strong></p><ul><li><code>(key,Int)</code>: The tuple of the key (string) and ID (int) assigned to the inserted vector</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">(key,id) = LMDiskANN.ann_insert!(index, vector)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/LMDiskANN.jl#L508-L530">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.clear_all_databases!-Tuple{Any, Any}" href="#LMDiskANN.clear_all_databases!-Tuple{Any, Any}"><code>LMDiskANN.clear_all_databases!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">clear_all_databases!(db_forward, db_reverse)</code></pre><p>Removes all entries from both forward and reverse databases.</p><p><strong>Arguments</strong></p><ul><li><code>db_forward</code>: Forward mapping database handle</li><li><code>db_reverse</code>: Reverse mapping database handle</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/UserIdMapping.jl#L155-L163">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.close_databases-Tuple{Any, Any}" href="#LMDiskANN.close_databases-Tuple{Any, Any}"><code>LMDiskANN.close_databases</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">close_databases(db_forward, db_reverse)</code></pre><p>Closes both databases.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/UserIdMapping.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.close_id_mapping-Union{Tuple{LMDiskANN.LMDiskANNIndex{T}}, Tuple{T}} where T&lt;:AbstractFloat" href="#LMDiskANN.close_id_mapping-Union{Tuple{LMDiskANN.LMDiskANNIndex{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>LMDiskANN.close_id_mapping</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">close_id_mapping(index::LMDiskANNIndex{T})</code></pre><p>Closes the user-key DB if open.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/LMDiskANN.jl#L362-L365">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.create_index-Tuple{String, Int64}" href="#LMDiskANN.create_index-Tuple{String, Int64}"><code>LMDiskANN.create_index</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_index(path_prefix::String, dim::Int; T::Type=Float32, maxdegree::Int=DEFAULT_MAX_DEGREE, metric::PreMetric=Euclidean())</code></pre><p>Creates a brand new LM-DiskANN index on disk with the given dimension, storing to files: <code>path_prefix.vec</code>, <code>path_prefix.adj</code>, <code>path_prefix.meta</code>.</p><p><strong>Arguments</strong></p><ul><li><code>path_prefix::String</code>: Prefix for the index files (without extension)</li><li><code>dim::Int</code>: Dimensionality of the vectors to be indexed</li></ul><p><strong>Optional arguments</strong></p><p>= <code>T::Type=Float32</code>: the typer for the embedding vectors</p><ul><li><code>maxdegree::Int=DEFAULT_MAX_DEGREE</code>: Maximum number of neighbors per node</li><li><code>metric</code>::PreMetric which is default Euclidean but can be a metric from Distances.jl</li></ul><p><strong>Returns</strong></p><ul><li><code>LMDiskANNIndex</code>: A new index instance</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">index = LMDiskANN.create_index(&quot;my_index&quot;, 128)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/LMDiskANN.jl#L216-L238">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.delete_by_id!-Tuple{Any, Any, Int64}" href="#LMDiskANN.delete_by_id!-Tuple{Any, Any, Int64}"><code>LMDiskANN.delete_by_id!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">delete_by_id!(db_forward, db_reverse, internal_id::Int)</code></pre><p>Deletes the entry for <code>internal_id</code> in <code>db_reverse</code>, and also deletes the corresponding entry in <code>db_forward</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/UserIdMapping.jl#L129-L134">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.delete_by_key!-Tuple{Any, Any, String}" href="#LMDiskANN.delete_by_key!-Tuple{Any, Any, String}"><code>LMDiskANN.delete_by_key!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">delete_by_key!(db_forward, db_reverse, user_key::String)</code></pre><p>Deletes the entry for <code>user_key</code> in <code>db_forward</code>, and also deletes the corresponding entry in <code>db_reverse</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/UserIdMapping.jl#L107-L112">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.get_embedding_from_id-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, Int64}} where T&lt;:AbstractFloat" href="#LMDiskANN.get_embedding_from_id-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, Int64}} where T&lt;:AbstractFloat"><code>LMDiskANN.get_embedding_from_id</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_embedding_from_id(index::LMDiskANNIndex{T}, id::Int)::Vector{T} where {T&lt;:AbstractFloat}</code></pre><p>Given a <strong>1-based</strong> ID (the same ID you&#39;d see returned by <code>ann_insert!</code> or in <code>search</code>), retrieve the stored embedding vector from <code>index.vecs</code>.</p><p>Throws an error if <code>id</code> is out of range or if it&#39;s already deleted (i.e., in the freelist).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/LMDiskANN.jl#L649-L657">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.get_embedding_from_key-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, String}} where T&lt;:AbstractFloat" href="#LMDiskANN.get_embedding_from_key-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, String}} where T&lt;:AbstractFloat"><code>LMDiskANN.get_embedding_from_key</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_embedding_from_key(index::LMDiskANNIndex{T}, key::String)::Vector{T} where {T&lt;:AbstractFloat}</code></pre><p>ARgument is a <strong>string key</strong> (which was stored during <code>ann_insert!(..., key=...)</code>), look up the 1-based ID from the forward DB, then retrieve the embedding.</p><p>Throws an error if the key doesn&#39;t exist</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/LMDiskANN.jl#L670-L677">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.get_id_from_key-Tuple{Any, String}" href="#LMDiskANN.get_id_from_key-Tuple{Any, String}"><code>LMDiskANN.get_id_from_key</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_id_from_key(db_forward, user_key::String) -&gt; Union{Int, Nothing}</code></pre><p>Fetches the internal<em>id associated with `user</em>key<code>from</code>db_forward<code>. Returns</code>nothing` if not found.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/UserIdMapping.jl#L57-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.get_key_from_id-Tuple{Any, Int64}" href="#LMDiskANN.get_key_from_id-Tuple{Any, Int64}"><code>LMDiskANN.get_key_from_id</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_key_from_id(db_reverse, internal_id::Int) -&gt; Union{String, Nothing}</code></pre><p>Fetches the user<em>key from `db</em>reverse<code>given the internal_id. Returns</code>nothing` if not found.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/UserIdMapping.jl#L80-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.insert_key!-Tuple{Any, Any, String, Int64}" href="#LMDiskANN.insert_key!-Tuple{Any, Any, String, Int64}"><code>LMDiskANN.insert_key!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">insert_key!(db_forward, db_reverse, user_key::String, internal_id::Int)</code></pre><p>Inserts <code>user_key -&gt; internal_id</code> into <code>db_forward</code>, and <code>internal_id -&gt; user_key</code> into <code>db_reverse</code>.</p><p>Both must be done to keep them in sync.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/UserIdMapping.jl#L37-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.list_all_keys-Tuple{Any}" href="#LMDiskANN.list_all_keys-Tuple{Any}"><code>LMDiskANN.list_all_keys</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_all_keys(db) -&gt; Vector{String}</code></pre><p>Returns a list of all keys in the database as strings.</p><p><strong>Arguments</strong></p><ul><li><code>db</code>: LevelDB database handle</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{String}</code>: List of all keys in the database</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/UserIdMapping.jl#L177-L187">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.load_index-Tuple{String}" href="#LMDiskANN.load_index-Tuple{String}"><code>LMDiskANN.load_index</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_index(path_prefix::String; metric::PreMetric=Euclidean())</code></pre><p>Loads an existing index,  <code>eltype</code> and the original metric are read from the meta-file automatically. You can also specify the metric which is by default Euclidean from Distances.jl</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/LMDiskANN.jl#L266-L270">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.open_databases-Tuple{String, String}" href="#LMDiskANN.open_databases-Tuple{String, String}"><code>LMDiskANN.open_databases</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">open_databases(forward_path::String, reverse_path::String; create_if_missing=true)</code></pre><p>Opens (or creates) two LevelDB databases:</p><ul><li>db<em>forward: string</em>key -&gt; string<em>of</em>internal_id</li><li>db<em>reverse: string</em>of<em>internal</em>id -&gt; string_key</li></ul><p>Returns a tuple (db<em>forward, db</em>reverse).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/UserIdMapping.jl#L8-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LMDiskANN.search-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, AbstractVector{&lt;:AbstractFloat}}} where T&lt;:AbstractFloat" href="#LMDiskANN.search-Union{Tuple{T}, Tuple{LMDiskANN.LMDiskANNIndex{T}, AbstractVector{&lt;:AbstractFloat}}} where T&lt;:AbstractFloat"><code>LMDiskANN.search</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">search(index::LMDiskANNIndex{T},
            query_vec::AbstractVector{&lt;:AbstractFloat};
            topk::Int=10, ef=DEFAULT_EF_SEARCH) where {T&lt;:AbstractFloat}</code></pre><p>Returns top-k approximate nearest neighbors for query_vec.</p><p><strong>Arguments</strong></p><ul><li><code>index::LMDiskANNIndex</code>: The index to search</li><li><code>query_vec::AbstractVector{Float32}</code>: The query vector</li><li><code>topk::Int=10</code>: Number of nearest neighbors to return</li><li><code>ef::Int=DEFAULT_EF_SEARCH</code> (size of the candidate list explored during the graph, larger <code>ef</code> means higher recall but slower queries) and <code>ef</code> is automatically promoted to at least <code>topk</code>.</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{Tuple{Union{String,Nothing}, Int}}</code> : a list of (key, id) pairs for the top-k nearest neighbours</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">results = LMDiskANN.search(index, query_vec, topk=5)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mantzaris/LMDiskANN.jl/blob/eafa0511fa18ed1710e8f858d7559c17d8b59200/src/LMDiskANN.jl#L434-L454">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.12.0 on <span class="colophon-date" title="Tuesday 10 June 2025 21:20">Tuesday 10 June 2025</span>. Using Julia version 1.10.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
